<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>资料管理｜观星楼</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body data-protected>
  <header class="header">
    <div class="container nav">
      <a class="logo" href="index.html">观星楼</a>
      <nav class="menu">
        <a href="must-read.html">包养必看</a>
        <a href="selection.html">选妃</a>
        <a href="about.html">关于我们</a>
        <a href="contact.html">联系我们</a>
        <a class="btn" id="logoutLink" href="login.html">退出登录</a>
      </nav>
    </div>
  </header>
  <main>
    <section class="section container">
      <div class="section-head">
        <h2>新增资料</h2>
        <span>Profiles Admin</span>
      </div>
      <div class="cta">
        <button class="btn" id="seedBtn">初始化测试数据</button>
      </div>
      <form id="profileForm" class="form">
        <label class="field"><span>昵称</span><input type="text" name="name" required></label>
        <label class="field"><span>城市</span><input type="text" name="city" required></label>
        <label class="field"><span>年龄</span><input type="number" name="age" min="16" max="60"></label>
        <label class="field"><span>标签（用逗号分隔）</span><input type="text" name="tags" placeholder="学生,清新"></label>
        <label class="field"><span>简介</span><textarea name="bio" rows="3"></textarea></label>
        <label class="field"><span>头像图片</span><input type="file" name="avatar" accept="image/*"></label>
        <label class="field"><span>发布</span><select name="published"><option value="false">否</option><option value="true">是</option></select></label>
        <button class="btn primary" type="submit">提交</button>
        <div id="profileMsg" class="msg"></div>
      </form>
    </section>

    <section class="section container">
      <div class="section-head">
        <h2>资料列表</h2>
        <span>All Profiles</span>
      </div>
      <div id="adminProfiles" class="card-grid"></div>
    </section>
  </main>
  <footer class="footer">
    <div class="container footer-inner">
      <div>© <span id="year"></span> 观星楼</div>
      <div class="legal">仅管理员操作，所有更改将记录</div>
    </div>
  </footer>
  <script src="/api/config"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
  <script src="assets/js/auth.js"></script>
  <script src="assets/js/admin.js"></script>
  <script src="assets/js/main.js"></script>
</body>
</html>
